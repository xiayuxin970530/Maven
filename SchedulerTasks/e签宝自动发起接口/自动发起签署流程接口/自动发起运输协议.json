{
  "Name": "自动发起运输协议",
  "Enabled": true,
  "Triggers": [
    {
      "$type": "Forguncy.ServerCommands.Models.ScheduleTrigger, ServerDesignerCommon",
      "Interval": 30.0,
      "TimeUnit": 2,
      "StartDateTime": 45313.4375,
      "ScheduleRunInDebugServer": false
    }
  ],
  "Commands": [
    {
      "$type": "Forguncy.Model.CatchExceptionCommand, ServerDesignerCommon",
      "TryCommandPart": {
        "CommandList": [
          {
            "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
            "ParameterName": "是否有发起任务id",
            "TableValue": {
              "TableName": "签章任务",
              "TableValueType": 3,
              "SqlCondition": {
                "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                "SubConditions": [
                  {
                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                    "ColumnBindingInfo": {
                      "TableName": "签章任务",
                      "ColumnName": "任务类型",
                      "GUID": "d18898e0-58ce-4095-bb85-dc7d5e3fa572"
                    },
                    "Value": "物流运输协议"
                  },
                  {
                    "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                    "SubConditions": [
                      {
                        "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                        "ColumnBindingInfo": {
                          "TableName": "签章任务",
                          "ColumnName": "接口发起状态",
                          "GUID": "956ebb66-f876-43f1-a1bc-64991e419951"
                        },
                        "Value": "%Null%",
                        "LeftBracket": 1
                      },
                      {
                        "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                        "ColumnBindingInfo": {
                          "TableName": "签章任务",
                          "ColumnName": "接口发起状态",
                          "GUID": "525c8b86-f437-4c44-a2ca-e7f35c1c3dbb"
                        },
                        "RightBracket": 1
                      }
                    ],
                    "RelationType": 1
                  },
                  {
                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                    "CompareType": 1,
                    "ColumnBindingInfo": {
                      "TableName": "签章任务",
                      "ColumnName": "发起状态",
                      "GUID": "de67af0b-7453-4cc8-bb13-9cbad42a98ce"
                    },
                    "Value": "1"
                  }
                ]
              },
              "TopCount": "1"
            },
            "ID": "666ab0455f1a44f2b70b3e86ad434734"
          },
          {
            "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
            "ParameterName": "发起任务id",
            "TableValue": {
              "TableName": "签章任务",
              "TableValueType": 1,
              "BindingInfos": [
                {
                  "BindingInfo": {
                    "TableName": "签章任务",
                    "ColumnName": "任务主表id",
                    "GUID": "7725d26d-15b2-40ae-96ad-24879ef04af8"
                  },
                  "ColumnName": "任务主表id"
                },
                {
                  "BindingInfo": {
                    "TableName": "签章任务",
                    "ColumnName": "公司类型",
                    "GUID": "1c2b7902-c8f0-4d11-93f7-7880491eb6ec"
                  },
                  "ColumnName": "公司类型"
                }
              ],
              "SqlCondition": {
                "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                "SubConditions": [
                  {
                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                    "ColumnBindingInfo": {
                      "TableName": "签章任务",
                      "ColumnName": "任务类型",
                      "GUID": "b97b0aa9-5d38-430d-a79c-e6e1e717290b"
                    },
                    "Value": "物流运输协议"
                  },
                  {
                    "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                    "SubConditions": [
                      {
                        "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                        "ColumnBindingInfo": {
                          "TableName": "签章任务",
                          "ColumnName": "接口发起状态",
                          "GUID": "e1c0ccda-0bd7-4514-9d20-2068fe96081c"
                        },
                        "Value": "%Null%",
                        "LeftBracket": 1
                      },
                      {
                        "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                        "ColumnBindingInfo": {
                          "TableName": "签章任务",
                          "ColumnName": "接口发起状态",
                          "GUID": "0725f475-e6d3-4b11-ba14-320eb9c87cf8"
                        },
                        "RightBracket": 1
                      }
                    ],
                    "RelationType": 1
                  },
                  {
                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                    "CompareType": 1,
                    "ColumnBindingInfo": {
                      "TableName": "签章任务",
                      "ColumnName": "发起状态",
                      "GUID": "f342348f-0caa-4dbb-9e1e-ea33d73bc673"
                    },
                    "Value": "1"
                  }
                ]
              },
              "TopCount": "1"
            },
            "ID": "933be763edea4432b2e9c4e36a8165d0"
          },
          {
            "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
            "ParameterName": "发起状态",
            "TableValue": {
              "TableName": "签章任务",
              "OnlyGetValue": true,
              "TableValueType": 0,
              "BindingInfos": [
                {
                  "BindingInfo": {
                    "TableName": "签章任务",
                    "ColumnName": "发起状态",
                    "GUID": "2f1cdf7e-47f2-4c89-82fa-9b5aff70598f"
                  },
                  "ColumnName": "发起状态"
                }
              ],
              "SqlCondition": {
                "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                "ColumnBindingInfo": {
                  "TableName": "签章任务",
                  "ColumnName": "任务主表id",
                  "GUID": "08edcb4e-3c88-4808-bb1d-2010460fab33"
                },
                "Value": {
                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                  "SerializeProperty": "=发起任务id.任务主表id"
                }
              },
              "TopCount": "1"
            },
            "ID": "24b160a0c55b42e3bdb6c7d1af5f665f"
          },
          {
            "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
            "ConditionAndCommandPairList": [
              {
                "Condition": {
                  "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                  "param": {
                    "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                    "ParamObject": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=是否有发起任务id"
                    }
                  },
                  "value": "0"
                },
                "CommandList": [
                  {
                    "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
                    "ErrorCode": "0",
                    "Message": "暂无数据发起！"
                  }
                ],
                "ID": "4c3335eb-5157-481d-8d9c-63a55898dcb5"
              },
              {
                "CommandList": [
                  {
                    "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                    "ConditionAndCommandPairList": [
                      {
                        "Condition": {
                          "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                          "param": {
                            "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                            "ParamObject": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=发起状态"
                            }
                          },
                          "value": "1"
                        },
                        "CommandList": [
                          {
                            "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
                            "ErrorCode": "0",
                            "Message": "发起过！"
                          }
                        ],
                        "ID": "b6137546-f1d0-4803-bea3-7146f5250cb7"
                      },
                      {
                        "CommandList": [
                          {
                            "$type": "Forguncy.Model.RequestServerCommand, ServerDesignerCommon",
                            "ServerCommandName": "自动发起动态表格运输协议",
                            "Parameters": [
                              {
                                "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                                "ParamName": "任务主表ID",
                                "Value": {
                                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                  "SerializeProperty": "=发起任务id.任务主表id"
                                }
                              }
                            ],
                            "ResultErrorCodeTo": {
                              "SerializeProperty": "res"
                            },
                            "ResultMessageTo": {
                              "SerializeProperty": "data"
                            },
                            "ReturnPropertiesTo": [
                              {
                                "ResultPropertyName": "任务主表id",
                                "ResultTo": {
                                  "SerializeProperty": "id"
                                }
                              }
                            ],
                            "RefreshAfterFinish": true,
                            "CheckDataValidation": true
                          },
                          {
                            "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
                            "ErrorCode": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=res"
                            },
                            "Message": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=data&发起任务id.任务主表id"
                            }
                          }
                        ],
                        "ID": "9fc4d929-cc6e-46e6-be2e-12868c547e26"
                      }
                    ]
                  }
                ],
                "ID": "b2f827be-f5ae-4006-804d-91234fff6497"
              }
            ]
          }
        ]
      },
      "CatchCommandPart": {
        "CommandList": [
          {
            "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
            "ErrorCode": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=ExceptionCode"
            },
            "Message": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=ExceptionMessage"
            }
          }
        ]
      }
    }
  ]
}