{
  "Name": "自动发起客户回执",
  "Enabled": true,
  "Triggers": [
    {
      "$type": "Forguncy.ServerCommands.Models.ScheduleTrigger, ServerDesignerCommon",
      "Interval": 40.0,
      "TimeUnit": 2,
      "StartDateTime": 45313.4375,
      "ScheduleRunInDebugServer": false
    }
  ],
  "Commands": [
    {
      "$type": "Forguncy.Model.CatchExceptionCommand, ServerDesignerCommon",
      "TryCommandPart": {
        "CommandList": [
          {
            "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
            "ParameterName": "是否有发起任务id",
            "TableValue": {
              "TableName": "签章任务",
              "TableValueType": 3,
              "SqlCondition": {
                "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                "SubConditions": [
                  {
                    "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                    "SubConditions": [
                      {
                        "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                        "ColumnBindingInfo": {
                          "TableName": "签章任务",
                          "ColumnName": "接口发起状态",
                          "GUID": "9d3774e7-12f3-4651-b956-93663dea59d8"
                        },
                        "Value": "%Null%",
                        "LeftBracket": 1
                      },
                      {
                        "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                        "ColumnBindingInfo": {
                          "TableName": "签章任务",
                          "ColumnName": "接口发起状态",
                          "GUID": "ef14b71e-fb7d-4dba-af6a-9c4bd364ec5a"
                        },
                        "RightBracket": 1
                      }
                    ],
                    "RelationType": 1
                  },
                  {
                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                    "CompareType": 1,
                    "ColumnBindingInfo": {
                      "TableName": "签章任务",
                      "ColumnName": "客户名称",
                      "GUID": "14eae001-316f-478c-9449-4096ff74c2f6"
                    },
                    "Value": "山东亿嘉农资连锁销售有限公司"
                  },
                  {
                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                    "CompareType": 1,
                    "ColumnBindingInfo": {
                      "TableName": "签章任务",
                      "ColumnName": "发起状态",
                      "GUID": "31bb2f49-28d1-4cac-94b2-c5606f33f169"
                    },
                    "Value": "1"
                  },
                  {
                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                    "ColumnBindingInfo": {
                      "TableName": "签章任务",
                      "ColumnName": "任务类型",
                      "GUID": "098d52b3-684a-4381-bc46-2022eaf9447c"
                    },
                    "Value": "客户回执"
                  }
                ]
              },
              "TopCount": "1"
            },
            "ID": "af0be50a2e5749bb95ee4c5f3cb91768"
          },
          {
            "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
            "ParameterName": "发起任务id",
            "TableValue": {
              "TableName": "签章任务",
              "TableValueType": 1,
              "BindingInfos": [
                {
                  "BindingInfo": {
                    "TableName": "签章任务",
                    "ColumnName": "任务主表id",
                    "GUID": "0971d48e-126b-4d87-883e-798384fda607"
                  },
                  "ColumnName": "任务主表id"
                },
                {
                  "BindingInfo": {
                    "TableName": "签章任务",
                    "ColumnName": "发起状态",
                    "GUID": "073f9d92-20c1-4dcf-84d3-ae079ad5e2af"
                  },
                  "ColumnName": "发起状态"
                }
              ],
              "SqlCondition": {
                "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                "SubConditions": [
                  {
                    "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                    "SubConditions": [
                      {
                        "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                        "ColumnBindingInfo": {
                          "TableName": "签章任务",
                          "ColumnName": "接口发起状态",
                          "GUID": "8f58818a-a049-4c2b-8ff9-4ca25640fda1"
                        },
                        "Value": "%Null%",
                        "LeftBracket": 1
                      },
                      {
                        "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                        "ColumnBindingInfo": {
                          "TableName": "签章任务",
                          "ColumnName": "接口发起状态",
                          "GUID": "3056c77b-e6fe-439c-8a65-611c694e1704"
                        },
                        "RightBracket": 1
                      }
                    ],
                    "RelationType": 1
                  },
                  {
                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                    "CompareType": 1,
                    "ColumnBindingInfo": {
                      "TableName": "签章任务",
                      "ColumnName": "客户名称",
                      "GUID": "2093cc53-e6b6-4ecf-a88e-991665d6aafa"
                    },
                    "Value": "山东亿嘉农资连锁销售有限公司"
                  },
                  {
                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                    "CompareType": 1,
                    "ColumnBindingInfo": {
                      "TableName": "签章任务",
                      "ColumnName": "发起状态",
                      "GUID": "6e689200-620b-42b4-a9cf-664ada9a4def"
                    },
                    "Value": "1"
                  },
                  {
                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                    "ColumnBindingInfo": {
                      "TableName": "签章任务",
                      "ColumnName": "任务类型",
                      "GUID": "09a09acd-12ab-49c3-aa90-3b90bb3e6f16"
                    },
                    "Value": "客户回执"
                  }
                ]
              },
              "TopCount": "1"
            },
            "ID": "fe753153620c448da744b518676d36f8"
          },
          {
            "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
            "ParameterName": "发起状态",
            "TableValue": {
              "TableName": "签章任务",
              "OnlyGetValue": true,
              "TableValueType": 0,
              "BindingInfos": [
                {
                  "BindingInfo": {
                    "TableName": "签章任务",
                    "ColumnName": "发起状态",
                    "GUID": "b384934d-bd4e-4da7-8098-46976daf7c72"
                  },
                  "ColumnName": "发起状态"
                }
              ],
              "SqlCondition": {
                "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                "ColumnBindingInfo": {
                  "TableName": "签章任务",
                  "ColumnName": "任务主表id",
                  "GUID": "d737fc0d-aa74-4276-be95-0ac95aa69852"
                },
                "Value": {
                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                  "SerializeProperty": "=发起任务id.任务主表id"
                }
              },
              "TopCount": "1"
            },
            "ID": "5be9e786943546bbadc461b160aa2cf7"
          },
          {
            "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
            "ConditionAndCommandPairList": [
              {
                "Condition": {
                  "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                  "param": {
                    "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                    "ParamObject": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=是否有发起任务id"
                    }
                  },
                  "value": "0"
                },
                "CommandList": [
                  {
                    "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
                    "ErrorCode": "0",
                    "Message": "暂无发起数据！"
                  }
                ],
                "ID": "15d709af-5416-4496-8e45-d1e5a32d8154"
              },
              {
                "CommandList": [
                  {
                    "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                    "ConditionAndCommandPairList": [
                      {
                        "Condition": {
                          "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                          "param": {
                            "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                            "ParamObject": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=发起状态"
                            }
                          },
                          "value": "1"
                        },
                        "CommandList": [
                          {
                            "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
                            "ErrorCode": "0",
                            "Message": "发起过！"
                          }
                        ],
                        "ID": "2286832f-238c-4ef7-be5a-c7aa61f9021e"
                      },
                      {
                        "CommandList": [
                          {
                            "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                            "ParameterName": "token",
                            "TableValue": {
                              "TableName": "token",
                              "OnlyGetValue": true,
                              "TableValueType": 0,
                              "BindingInfos": [
                                {
                                  "BindingInfo": {
                                    "TableName": "token",
                                    "ColumnName": "token",
                                    "GUID": "a39df5f6-f5b0-45db-a8ef-d2866f80d090"
                                  },
                                  "ColumnName": "token"
                                }
                              ]
                            },
                            "ID": "22f401ee75274ed89556d6e26e8968d2"
                          },
                          {
                            "$type": "Forguncy.Model.RequestServerCommand, ServerDesignerCommon",
                            "ServerCommandName": "自动发起客户回执接口自动签署",
                            "Parameters": [
                              {
                                "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                                "ParamName": "token",
                                "Value": {
                                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                  "SerializeProperty": "=token"
                                }
                              },
                              {
                                "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                                "ParamName": "任务主表id",
                                "Value": {
                                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                  "SerializeProperty": "=发起任务id.任务主表id"
                                }
                              }
                            ],
                            "ResultErrorCodeTo": {
                              "SerializeProperty": "res"
                            },
                            "ResultMessageTo": {
                              "SerializeProperty": "data"
                            },
                            "RefreshAfterFinish": true,
                            "CheckDataValidation": true
                          },
                          {
                            "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
                            "ErrorCode": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=res"
                            },
                            "Message": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=data&发起任务id.任务主表id"
                            }
                          }
                        ],
                        "ID": "0c9db4c1-0691-4ee3-9b90-cafb4a23709b"
                      }
                    ]
                  }
                ],
                "ID": "6a6b2b7a-c394-4335-8ace-37609775f585"
              }
            ]
          }
        ]
      },
      "CatchCommandPart": {
        "CommandList": [
          {
            "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
            "ErrorCode": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=ExceptionCode"
            },
            "Message": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=ExceptionMessage"
            }
          }
        ]
      }
    }
  ]
}